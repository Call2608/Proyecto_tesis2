<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="pt_campania_tree_view" model="ir.ui.view">
        <field name="name">pt.campania.tree.view</field> 
        <field name="model">pt.campania</field>
        <field name="arch" type="xml">
            <tree string="Campaña">
                <field name="identificador"/>
                <field name="fecha_ini" optional="show"/>
                <field name="fecha_fin" optional="show"/>
                <field name="estado" optional="show"/>
                <field name="contactos_recuperados" optional="show"/>
                <field name="contactos_nuevos" optional="show"/>
            </tree>
        </field>
    </record>




    <record id="pt_campania_search_form_view" model="ir.ui.view">
        <field name="name">pt.campania.search</field>
        <field name="model">pt.campania</field>
        <field name="mode">primary</field>
        <field name="arch" type="xml">
            <search string="Buscar campaña">
                <filter string="Nuevo" name="new" domain="[('state', '=', 'draft')]"/>
                <filter string="En proceso" name="running" domain="[('state', '=', 'running')]"/>
                <filter string="Pausado" name="stopped" domain="[('state', '=', 'stopped')]"/>
                <field name="identificador" string="Identificador"/>
                <field name="fecha_ini" string="Fecha de inicio"/>
                <field name="fecha_fin" string="Fecha de fin"/>
                <field name="estado" string="Estado"/>
            </search>
        </field>
    </record>
    
 

    <record id="pt_campania_form_view" model="ir.ui.view">
        <field name="name">pt.campania.form.view</field> 
        <field name="model">pt.campania</field>
        <field name="arch" type="xml">
            <form string="Campania">
            <header>
                <button name="action_start_campaign" type="object" class="btn-primary" string="Iniciar" invisible="state == 'running' or not active" />
                <button name="action_stop_campaign" type="object" invisible="estado != 'running'" class="btn-primary" string="Parar" />
                <field name="estado" widget="statusbar" statusbar_visible="draft,running,stopped" readonly="1"> 
            </header>
            <sheet>
                    <div class="container">
                        <div class="row">
                        
                                <group>
                                    <group>
                                        <field name="identificador" placeholder="Identificador"/>
                                        <field name="fecha_ini" placeholder="Fecha de inicio"/>
                                        <field name="fecha_fin" placeholder="Fecha de fin"/>
                                        <field name="plantilla_correo" placeholder="Plantilla de correo"/>
                                        <field name="model_id" string="Objetivo" readonly="estado != 'draft'"/>
                                        <div class="col-xs-12 col-md-9 o_td_label">
                                            <field name="mailing_filter_id"
                                                widget="mailing_filter"
                                                options="{'no_create': '1', 'no_open': '1', 'domain_field': 'domain', 'model_field': 'model_id'}"
                                                placeholder="Reload a favorite filter" class="w-auto"/>
                                            <field name="mailing_filter_domain" invisible="1"/>
                                            <field name="mailing_filter_count" invisible="1"/>
                                        </div>
                                    </group>
                                    <group>
                                        <field name="objetivo" placeholder="Añadir objetivo"/>
                                        <field name="correos_enviados" readonly="1"/>
                                        <field name="correos_entregados" readonly="1"/>
                                        <field name="correos_recibidos" readonly="1"/>
                                    </group>
                                    <div>
                                        <group>
                                            <field name="notas" placeholder="Agregar nota..."/>
                                        </group>
                                    </div>
                                </group>
                        </div>
                        <div class="row">
                            <notebook>

                            </notebook>
                        </div>
                    </div>

                </sheet>
            </form>
        </field>
    </record>

    <record id="pt_campania_action" model="ir.actions.act_window">
        <field name="name">Campania</field> 
        <field name="res_model">pt.campania</field>
        <field name ="view_mode">tree,form</field>
        <field name ="help" type="html">
            <p class="o_view_nocontent_smiling_face">
            Crear una nueva campaña
            </p>
            </field>
    </record>


    
    <menuitem   id="menu_clinica_root"
                name="Campañas"
                sequence="35"/>


    <menuitem   id="menu_campania_principal"
                name="Campania"
                parent="menu_clinica_root"/>


    <menuitem   id="pt_campania_menu"
                action="pt_campania_action"
                parent="menu_campania_principal"
                name="Campañas"/>


    




</odoo>
